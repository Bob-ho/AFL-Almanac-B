function chemTypeToIcon(t){return chemIconMap[t]||"bas"}function _getModificationFunction(t,a){return 0==a?function(t){return-25}:t<0?function(a){return t/2}:function(a){return a*t/50}}function _normalize(t){var a=Math.round(10*t)/10;return Math.max(10,Math.min(99,Math.round(a)))}function getDeltas(t,a,e){for(var n=_getModificationFunction(.25*(a=Math.max(0,Math.min(100,a)))+7.5*(e=Math.max(0,Math.min(10,e)))-50,e),i=MAX[t]||MAX.basic,o=[],r=0;r<i.length;r++)o.push(n(i[r]));return o}function statColor(t){return(t=parseInt(t))<60?"stat-color-1":t<70?"stat-color-2":t<80?"stat-color-3":t<90?"stat-color-4":"stat-color-5"}function updatePositionalRatings(t){void 0===t&&(t=$("body"));var a=$(t),e={},n={};$.each(a.find(".player-stat-row"),function(t,a){a=$(a),e[a.find(".chembot-delta").data("chembotField")]=parseInt(a.find(".chembot-value").text())}),$.each(RATING_PER_POSITION,function(t,a){for(var i=0,o=0;o<a.length;o++)a[o]&&(i+=a[o]*e[FIELD[o]]);n[t]=Math.round(i)}),$.each(n,function(t,e){var n=a.find(".igr-"+t+"-value").removeClassByPattern("(default|stat-color-\\d)");isNaN(e)?(n.addClass("default"),n.find(".igr-value").text("- -")):(n.addClass(statColor(e)),n.find(".igr-value").text(e))})}function updateStandaloneStat(t,a,e){var n=t.find('.chembot-delta[data-chembot-field="'+a+'"]');t.find('[data-field="'+a+'"] .chembot-value').text(n.data("chembotBase")+e),0!==e?n.text(e.signum()).css(e>0?{color:"#3aae00"}:{color:"#da0200"}):n.text("")}var CORE_FIELDS=["attr1","attr2","attr3","attr4","attr5","attr6"],IGS_FIELDS=["acceleration","sprintspeed","positioning","finishing","shotpower","longshots","volleys","penalties","vision","crossing","freekickaccuracy","longpassing","shortpassing","curve","agility","balance","reactions","ballcontrol","dribbling","composure","interceptions","headingaccuracy","marking","standingtackle","slidingtackle","jumping","stamina","strength","aggression"],FIELD=IGS_FIELDS.concat(CORE_FIELDS),RATING_POSITION_GROUP={striker:[.04,.05,.13,.18,.1,.03,.02,0,0,0,0,0,.05,0,0,0,.08,.1,.07,0,.1,0,0,0,0,0,.05,0,0],winger:[.07,.06,.09,.1,0,.04,0,0,.06,.09,0,0,.09,0,.03,0,.07,.14,.16,0,0,0,0,0,0,0,0,0,0],forward:[.05,.05,.13,.11,.05,.04,0,0,.08,0,0,0,.09,0,0,0,.09,.15,.14,0,0,.02,0,0,0,0,0,0,0],cam:[.04,.03,.09,.07,0,.05,0,0,.14,0,0,.04,.16,0,.03,0,.07,.15,.13,0,0,0,0,0,0,0,0,0,0],centerMid:[0,0,.06,.02,0,.04,0,0,.13,0,0,.13,.17,0,0,0,.08,.14,.07,0,.05,0,0,.05,0,0,.06,0,0],wideMid:[.07,.06,.08,.06,0,0,0,0,.07,.1,0,.05,.11,0,0,0,.07,.13,.15,0,0,0,0,0,0,0,.05,0,0],cdm:[0,0,0,0,0,0,0,0,.04,0,0,.1,.14,0,0,0,.07,.1,0,0,.14,0,.09,.12,.05,0,.06,.04,.05],cb:[0,.02,0,0,0,0,0,0,0,0,0,0,.05,0,0,0,.05,.04,0,0,.13,.1,.14,.17,.1,.03,0,.1,.07],fullback:[.05,.07,0,0,0,0,0,0,0,.09,0,0,.07,0,0,0,.08,.07,0,0,.12,.04,.08,.11,.14,0,.08,0,0],wingback:[.04,.06,0,0,0,0,0,0,0,.12,0,0,.1,0,0,0,.08,.08,.04,0,0,.12,0,.07,.08,.11,0,.1,0]},RATING_PER_POSITION={ST:RATING_POSITION_GROUP.striker,LW:RATING_POSITION_GROUP.winger,LF:RATING_POSITION_GROUP.forward,CF:RATING_POSITION_GROUP.forward,RF:RATING_POSITION_GROUP.forward,RW:RATING_POSITION_GROUP.winger,CAM:RATING_POSITION_GROUP.cam,LM:RATING_POSITION_GROUP.wideMid,CM:RATING_POSITION_GROUP.centerMid,RM:RATING_POSITION_GROUP.wideMid,CDM:RATING_POSITION_GROUP.cdm,LWB:RATING_POSITION_GROUP.wingback,LB:RATING_POSITION_GROUP.fullback,CB:RATING_POSITION_GROUP.cb,RB:RATING_POSITION_GROUP.fullback,RWB:RATING_POSITION_GROUP.wingback},CORE={attr1:{acceleration:.45,sprintspeed:.55},attr2:{positioning:.05,finishing:.45,shotpower:.2,longshots:.2,volleys:.05,penalties:.05},attr3:{vision:.2,crossing:.2,freekickaccuracy:.05,shortpassing:.35,longpassing:.15,curve:.05},attr4:{agility:.1,balance:.05,reactions:.05,ballcontrol:.3,dribbling:.5},attr5:{interceptions:.2,headingaccuracy:.1,marking:.3,standingtackle:.3,slidingtackle:.1},attr6:{jumping:.05,stamina:.25,strength:.5,aggression:.2}},MAX={basic:[0,5,5,0,5,0,5,5,5,0,0,5,5,5,5,0,0,5,5,0,0,0,5,5,5,5,0,5,0],sniper:[0,0,5,15,0,0,10,15,0,0,0,0,0,0,10,5,5,5,10,5,0,0,0,0,0,0,0,0,0],finisher:[0,0,5,5,15,15,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,5,10],deadeye:[0,0,15,15,10,5,0,5,10,5,5,0,10,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],marksman:[0,0,5,10,5,10,10,5,0,0,0,0,0,0,5,0,5,5,5,0,0,0,0,0,0,10,0,5,5],hawk:[5,5,10,5,10,0,10,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,5,10],artist:[0,0,0,0,0,0,0,0,15,10,0,15,5,5,10,5,0,10,10,0,0,0,0,0,0,0,0,0,0],architect:[0,0,0,0,0,0,0,0,10,15,5,15,10,5,0,0,0,0,0,0,0,0,0,0,0,5,0,10,10],powerhouse:[0,0,0,0,0,0,0,0,10,5,0,10,15,5,0,0,0,0,0,0,5,0,10,15,10,0,0,0,0],maestro:[0,0,5,0,10,10,5,0,5,0,10,5,10,0,5,0,5,5,10,0,0,0,0,0,0,0,0,0,0],engine:[5,5,0,0,0,0,0,0,5,5,10,10,5,0,5,10,5,5,10,0,0,0,0,0,0,0,0,0,0],sentinel:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,10,10,15,15,10,0,10,10],guardian:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,10,5,5,10,5,15,10,15,0,0,0,0],gladiator:[0,0,10,5,10,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,15,5,10,15,0,0,0,0],backbone:[0,0,0,0,0,0,0,0,5,10,0,5,10,5,0,0,0,0,0,0,5,5,10,10,10,5,0,5,0],anchor:[5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,10,10,10,10,10,0,5,10],hunter:[10,10,5,5,10,0,15,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],catalyst:[10,10,0,0,0,0,0,0,15,15,10,0,5,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],shadow:[15,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,5,10,5,15,0,0,0,0]},chemIconMap={basic:"bas",sniper:"att",finisher:"att",deadeye:"att",marksman:"att",hawk:"att",artist:"mid",architect:"mid",powerhouse:"mid",maestro:"mid",engine:"mid",sentinel:"def",guardian:"def",gladiator:"def",backbone:"def",anchor:"def",hunter:"skill",catalyst:"skill",shadow:"skill"};$.fn.removeChemistry=function(){var t=$(this);$.each(FIELD,function(a,e){var n=t.find('.chembot-delta[data-chembot-field="'+e+'"]'),i=n.data("chembotBase");n.hide(),i&&(n.siblings(".chembot-value").text(i),n.siblings(".chembot-value, .stat-chart").each(function(){0==$(this).closest(".playercard").length&&$(this).removeClassByPattern("(default|stat-color-\\d)").addClass(statColor(i))}),window.chembot&&window.chembot[e]&&window.chembot[e].load({columns:[["data",i]]}))}),$(".player-chemistry-remove-style").hide(),updatePositionalRatings(t),updateStandaloneStat(t,"total_stats",0),updateStandaloneStat(t,"total_ingame_stats",0)},$.fn.applyChemistry=function(t,a,e){function n(t,a,e,n){$.each(n,function(n,i){i=$(i);var o=parseInt(i.data("chembotBase")),c=i.closest(".playercard").length;if(!isNaN(o)){var l;IGS_FIELDS.indexOf(t)>=0?(l=_normalize(o+a),r[t]=a,s[t]=l):l=_normalize(a*(e-o)>0?e:o);var d=l-o;if(c){var h;h=d>0?"up":"down",i.removeClass("up down").addClass(h).text(Math.abs(d))}else i.text(d.signum());window.chembot&&window.chembot[t]&&(window.chembot[t].load({columns:[["data",l]]}),c||$(window.chembot[t].element).removeClassByPattern("(default|stat-color-\\d)").addClass(statColor(l)));var m=i.siblings(".chembot-value");m.text(l),c||m.removeClassByPattern("(default|stat-color-\\d)").addClass(statColor(l)),0==d?i.hide():(i.show(),c||(d<0?i.css({color:"#da0200"}):i.css({color:"#3aae00"})))}})}if(!t||void 0===a||void 0===e)return $(this).removeChemistry();var i=$(this),o=getDeltas(t,a,e),r={},s={},c=0;$.each(IGS_FIELDS,function(t,a){var e=i.find('.chembot-delta[data-chembot-field="'+a+'"]');n(a,o[t],void 0,e),c+=parseInt(e.text())});var l=0;$.each(CORE,function(t,a){var e=0,o=0,c=i.find('.chembot-delta[data-chembot-field="'+t+'"]');$.each(a,function(t,a){e+=r[t],o+=s[t]*a}),n(t,e,o,c),c=c.filter(function(t,a){return!$(a).closest(".playercard").length}),l+=parseInt(c.first().text())}),$(".player-chemistry-remove-style").show(),updatePositionalRatings(i),updateStandaloneStat(i,"total_stats",l),updateStandaloneStat(i,"total_ingame_stats",c)},$.fn.fakeChemistry=function(t,a){var e=$(".chem-name");e.text(t),e.parent().removeClass("style-none").addClass("chem-icon style-"+a)};