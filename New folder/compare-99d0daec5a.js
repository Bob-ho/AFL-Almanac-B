function dateToAge(e){var t=+new Date(e);return~~((Date.now()-t)/315576e5)}var activeTab,compareTabs=[{id:"base",title:{lg:"Base Stats",md:"Base Stats",sm:"Base",xs:"Base"},rows:[{field:"rating",title:{lg:"Rating",md:"Rating",sm:"Rating",xs:"Rating"}},{field:"attr1",title:{lg:"PAC",md:"PAC",sm:"PAC",xs:"PAC"}},{field:"attr2",title:{lg:"SHO",md:"SHO",sm:"SHO",xs:"SHO"}},{field:"attr3",title:{lg:"PAS",md:"PAS",sm:"PAS",xs:"PAS"}},{field:"attr4",title:{lg:"DRI",md:"DRI",sm:"DRI",xs:"DRI"}},{field:"attr5",title:{lg:"DEF",md:"DEF",sm:"DEF",xs:"DEF"}},{field:"attr6",title:{lg:"PHY",md:"PHY",sm:"PHY",xs:"PHY"}},{field:"total_stats",title:{lg:"Total Stats",md:"Total Stats",sm:"Total Stats",xs:"Total"}},{field:"total_ingame_stats",title:{lg:"Total In-Game Stats",md:"Total IGS",sm:"Total IGS",xs:"IGS"}}]},{id:"igs",title:{lg:"In-Game Stats",md:"In-Game Stats",sm:"IGS",xs:"IGS"},rows:[{field:"acceleration",title:{lg:"Acceleration",md:"Acceleration",sm:"ACC",xs:"ACC"}},{field:"sprintspeed",title:{lg:"Sprint Speed",md:"Sprint Speed",sm:"SPD",xs:"SPD"}},{field:"positioning",title:{lg:"Positioning",md:"Positioning",sm:"POS",xs:"POS"}},{field:"finishing",title:{lg:"Finishing",md:"Finishing",sm:"FIN",xs:"FIN"}},{field:"shotpower",title:{lg:"Shot Power",md:"Shot Power",sm:"SHO",xs:"SHO"}},{field:"longshots",title:{lg:"Long Shots",md:"Long Shots",sm:"LOS",xs:"LOS"}},{field:"volleys",title:{lg:"Volleys",md:"Volleys",sm:"VOL",xs:"VOL"}},{field:"penalties",title:{lg:"Penalties",md:"Penalties",sm:"PEN",xs:"PEN"}},{field:"vision",title:{lg:"Vision",md:"Vision",sm:"VIS",xs:"VIS"}},{field:"crossing",title:{lg:"Crossing",md:"Crossing",sm:"CRO",xs:"CRO"}},{field:"freekickaccuracy",title:{lg:"Free Kick Accuracy",md:"FK Accuracy",sm:"FKA",xs:"FKA"}},{field:"shortpassing",title:{lg:"Short Passing",md:"Short Passing",sm:"SPA",xs:"SPA"}},{field:"longpassing",title:{lg:"Long Passing",md:"Long Passing",sm:"LPA",xs:"LPA"}},{field:"curve",title:{lg:"Curve",md:"Curve",sm:"CRV",xs:"CRV"}},{field:"agility",title:{lg:"Agility",md:"Agility",sm:"AGI",xs:"AGI"}},{field:"balance",title:{lg:"Balance",md:"Balance",sm:"BAL",xs:"BAL"}},{field:"reactions",title:{lg:"Reactions",md:"Reactions",sm:"REA",xs:"REA"}},{field:"ballcontrol",title:{lg:"Ball Control",md:"Ball Control",sm:"BAC",xs:"BAC"}},{field:"dribbling",title:{lg:"Dribbling",md:"Dribbling",sm:"DRI",xs:"DRI"}},{field:"composure",title:{lg:"Composure",md:"Composure",sm:"CMP",xs:"CMP"}},{field:"interceptions",title:{lg:"Interceptions",md:"Interceptions",sm:"INT",xs:"INT"}},{field:"headingaccuracy",title:{lg:"Heading Accuracy",md:"Heading Acc.",sm:"HEA",xs:"HEA"}},{field:"marking",title:{lg:"Marking",md:"Marking",sm:"MRK",xs:"MRK"}},{field:"slidingtackle",title:{lg:"Sliding Tackle",md:"Sliding Tackle",sm:"SLT",xs:"SLT"}},{field:"standingtackle",title:{lg:"Standing Tackle",md:"Standing Tackle",sm:"STT",xs:"STT"}},{field:"jumping",title:{lg:"Jumping",md:"Jumping",sm:"JMP",xs:"JMP"}},{field:"stamina",title:{lg:"Stamina",md:"Stamina",sm:"STA",xs:"STA"}},{field:"strength",title:{lg:"Strength",md:"Strength",sm:"STR",xs:"STR"}},{field:"aggression",title:{lg:"Aggression",md:"Aggression",sm:"AGG",xs:"AGG"}}]},{id:"igr",title:{lg:"In-Game Ratings",md:"In-Game Ratings",sm:"IGR",xs:"IGR"},rows:[{field:"st",title:{lg:"ST",md:"ST",sm:"ST",xs:"ST"}},{field:"cf",title:{lg:"CF",md:"CF",sm:"CF",xs:"CF"}},{field:"lf",title:{lg:"LF",md:"LF",sm:"LF",xs:"LF"}},{field:"rf",title:{lg:"RF",md:"RF",sm:"RF",xs:"RF"}},{field:"lw",title:{lg:"LW",md:"LW",sm:"LW",xs:"LW"}},{field:"rw",title:{lg:"RW",md:"RW",sm:"RW",xs:"RW"}},{field:"cam",title:{lg:"CAM",md:"CAM",sm:"CAM",xs:"CAM"}},{field:"cm",title:{lg:"CM",md:"CM",sm:"CM",xs:"CM"}},{field:"lm",title:{lg:"LM",md:"LM",sm:"LM",xs:"LM"}},{field:"rm",title:{lg:"RM",md:"RM",sm:"RM",xs:"RM"}},{field:"cdm",title:{lg:"CDM",md:"CDM",sm:"CDM",xs:"CDM"}},{field:"lwb",title:{lg:"LWB",md:"LWB",sm:"LWB",xs:"LWB"}},{field:"lb",title:{lg:"LB",md:"LB",sm:"LB",xs:"LB"}},{field:"cb",title:{lg:"CB",md:"CB",sm:"CB",xs:"CB"}},{field:"rb",title:{lg:"RB",md:"RB",sm:"RB",xs:"RB"}},{field:"rwb",title:{lg:"RWB",md:"RWB",sm:"RWB",xs:"RWB"}}]},{id:"futhead",title:{lg:"Futhead Stats",md:"Futhead Stats",sm:"FH Stats",xs:"FH"},rows:[{field:"attacker_stats",title:{lg:"Attacker Rating",md:"Attacker Rating",sm:"Attacker",xs:"Attack"}},{field:"creator_stats",title:{lg:"Creator Rating",md:"Creator Rating",sm:"Creator",xs:"Create"}},{field:"defender_stats",title:{lg:"Defender Rating",md:"Defender Rating",sm:"Defender",xs:"Defend"}},{field:"heading_stats",title:{lg:"Header Rating",md:"Header Rating",sm:"Header",xs:"Header"}},{field:"beast_stats",title:{lg:"Beast Rating",md:"Beast Rating",sm:"Beast",xs:"Beast"}},{field:"total_stats",title:{lg:"Total Stats",md:"Total Stats",sm:"Total Stats",xs:"Total"}},{field:"total_ingame_stats",title:{lg:"Total In-Game Stats",md:"Total IGS",sm:"Total IGS",xs:"IGS"}}]},{id:"info",title:{lg:"Player Info",md:"Player Info",sm:"Info",xs:"Info"},rows:[{field:"card_name",title:{lg:"Name",md:"Name",sm:"Name",xs:"Name"}},{field:"club",title:{lg:"Club",md:"Club",sm:"Club",xs:"Club"}},{field:"league",title:{lg:"League",md:"League",sm:"League",xs:"League"}},{field:"nation",title:{lg:"Nation",md:"Nation",sm:"Nation",xs:"Nation"}},{field:"revision_type_verbose",title:{lg:"Item Type",md:"Item Type",sm:"Type",xs:"Type"}},{field:"position",title:{lg:"Position",md:"Position",sm:"Position",xs:"Position"}},{field:"workrates_short_string",title:{lg:"Workrates",md:"Workrates",sm:"Workrates",xs:"W/R"}},{field:"skill_moves",title:{lg:"Skill Moves",md:"Skill Moves",sm:"Skill Moves",xs:"Skill"}},{field:"weak_foot_skill",title:{lg:"Weak Foot",md:"Weak Foot",sm:"Weak Foot",xs:"Weak"}},{field:"foot",title:{lg:"Preferred Foot",md:"Preferred Foot",sm:"Foot",xs:"Foot"}},{field:"age",title:{lg:"Age",md:"Age",sm:"Age",xs:"Age"}},{field:"height",title:{lg:"Height",md:"Height",sm:"Height",xs:"Height"}}]}],COMPARE_FIELDS=FIELD.concat(["rating","headingaccuracy","freekickaccuracy","total_stats","total_ingame_stats","attacker_stats","creator_stats","defender_stats","heading_stats","beast_stats"]),updateChemistry=function(){$(".compare-player.filled").each(function(){var e=$(this).find(":input");$(this).applyChemistry(e.filter('[name="chemStyle"]').val(),e.filter('[name="chemTeam"]').val(),e.filter('[name="chemIndividual"]').val())})},updateComparison=function(){if($(".compare-player.filled").length>0){var e=[];$.each($(".compare-row[data-field]"),function(t,a){var i=$(a).data("field");if(!arrayContains(e,i)){e.push(i);var l=[],s=$('.compare-row[data-field="'+i+'"] .compare-value');$.each(s,function(e,t){!isNaN($(t).text())&&l.push(parseInt($(t).text()))});var o=Math.max.apply(Math,l);$.each(s,function(e,t){var a=$(t).closest(".compare-row"),i=a.find(".compare-stat");/^attr\d$/.test(a.data("field"))&&(i=$.merge(i,a.closest(".compare-column").find('.playercard .compare-stat[data-compare-field="'+a.data("field")+'"]'))),parseInt($(t).text())===o?i.addClass("best").removeClass("bad"):i.removeClass("best").addClass("bad")})}})}},checkSearchEnabled=function(){$(".compare-search, .add-player-year").prop("disabled",$(".compare-player").length>3)},emphasizeSearch=function(){$("body").addClass("compare-focus"),$(".compare-search-focus").addClass("in"),$(".compare-search").focus()},deemphasizeSearch=function(){$("body").removeClass("compare-focus"),$(".compare-search-focus").removeClass("in")},updatePlayerSearch=function(e){$(".compare-search").quicksearch({year:Math.min(18,Math.max(10,parseInt(e))),type:"player",size:isSize("xs")?"small":"large",select:function(e,t){$(".compare-player.empty").addCompareColumn(t.item),deemphasizeSearch(),checkSearchEnabled()}})};$().ready(function(){activeTab=$("#compare-form").data("activeTab"),updateChemistry(),updateComparison(),$(".tab-toggle").click(function(){activeTab=$(this).data("id")||activeTab}),$(".compare-search").blur(function(){deemphasizeSearch()}),$(".compare-player .add-player").click(function(){emphasizeSearch()}),$(".compare-player").each(function(){$(this).bindCompareForm()}),$(".compare-search-group .change-player-year").click(function(){var e=parseInt($(this).data("year"));$(this).closest(".compare-search-group").find(".year-value").text(e),updatePlayerSearch(e),$(".compare-search").focus()}),$("#ShareModal").find(".social-buttons").remove(),checkSearchEnabled(),updatePlayerSearch(18),updateURL()});var verboseHeight=function(e){e=parseInt(e);var t=Math.floor(e/2.54)%12;return e+"cm | "+Math.floor(e/2.54/12)+"'"+t+'"'};$.fn.addCompareColumn=function(e){var t="";$.each(compareTabs,function(a,i){var l="";$.each(i.rows,function(t,a){var s;if("igr"===i.id)s='<div class="compare-stat"><span class="compare-value revision-gradient shadowed igr igr-'+a.field.toUpperCase()+'-value"><span class="igr-value">- -</span></span></div>';else if("card_name"===a.field)s='<div><a href="'+e.url+'" target="_blank">'+e[a.field].toTitleCase()+"</a></div>";else if("height"===a.field)s="<div>"+verboseHeight(e[a.field])+"</div>";else if("age"===a.field)s="<div>"+dateToAge(e.birthdate)+"</div>";else if(arrayContains(["skill_moves","weak_foot_skill"],a.field))s='<div><span class="icon icon-star gold"></span> '+e[a.field]+"</div>";else if(arrayContains(["club","league","nation"],a.field))s='<div><img class="img-24 margin-r-4" src="'+e[a.field+"_image"]+'"><span class="hidden-sm hidden-xs">'+e[a.field+"_name"]+"</span></div>";else if(COMPARE_FIELDS.indexOf(a.field)>-1){var o;null==e[a.field]?(o="default",e[a.field]="- -"):o="rating"===a.field?"fut"+e.version+" "+e.rating_color+" "+e.revision_type.toLowerCase():arrayContains(["total_stats","total_ingame_stats"],a.field)?"default":"igs "+statColor(e[a.field]),s='<div class="compare-stat player-stat-row" data-value="'+(e[a.field]||-1)+'"><span class="compare-value chembot-value revision-gradient shadowed '+o+'">'+(e[a.field]||"- -")+'</span><span class="chembot-delta" data-chembot-base="'+(e[a.field]||-1)+'" data-chembot-field="'+a.field+'"></span></div>'}else{var n;n="revision_type_verbose"===a.field?"revision_type":a.field,s="<div>"+e[n]+"</div>"}l+='<div class="compare-row" data-field="'+a.field+'">'+s+"</div>"}),t+='<div class="tab '+i.id+"-tab "+(i.id===activeTab?"in":"")+'">'+l+"</div>"});var a=e.rare?"":"non-rare",i=e.revision_type?e.revision_type.toLowerCase():"";$(this).before('<div class="col-xs-3 compare-column compare-player filled"><div class="header"><div class="remove-player"><div class="hidden-sm hidden-xs">'+cardFromData(e,"small","text-center center-block")+'</div><div class="headshot visible-sm visible-xs '+card_class("small",e.year,e.rating,a,i)+'"><img src="'+cdnify(e.image)+'"></div></div><div class="row chemistry-panel margin-t-4 hidden-xs"><div class="col-sm-9 padding-4"><select class="form-control" name="chemStyle"><option value>Chemistry Style</option><option value="basic">Basic</option><option value="sniper">Sniper</option><option value="finisher">Finisher</option><option value="deadeye">Deadeye</option><option value="marksman">Marksman</option><option value="hawk">Hawk</option><option value="artist">Artist</option><option value="architect">Architect</option><option value="powerhouse">Powerhouse</option><option value="maestro">Maestro</option><option value="engine">Engine</option><option value="sentinel">Sentinel</option><option value="guardian">Guardian</option><option value="gladiator">Gladiator</option><option value="backbone">Backbone</option><option value="anchor">Anchor</option><option value="hunter">Hunter</option><option value="catalyst">Catalyst</option><option value="shadow">Shadow</option></select></div><div class="col-xs-3 padding-4"><span class="btn btn-sm btn-danger-outline btn-full margin-0 remove-chemistry pull-right"><span class="icon icon-lab-flask"></span><span class="icon icon-cross"></span></span></div><div class="col-sm-6 padding-4"><input type="text" class="form-control text-center" name="chemIndividual" maxlength="2" max="10" min="0" placeholder="Indv. Chem"></div><div class="col-sm-6 padding-4"><input type="text" class="form-control text-center" name="chemTeam" maxlength="3" max="100" min="0" placeholder="Team Chem"></div></div><input type="hidden" name="player" value="'+e.id+'"><input type="hidden" name="year" value="'+e.year+'"></div><div class="tab-group"><div class="tabs">'+t+"</div></div></div>"),$(this).prev().bindCompareForm(),checkSearchEnabled(),updateChemistry(),updateComparison(),updateURL(),loadFeaturedPrices()};var updateURL=function(){var e="",t={player:"p",year:"y",chemStyle:"c",chemTeam:"t",chemIndividual:"i"};$.each($("#compare-form").serializeArray(),function(){if("chemStyle"===this.name){var a=$('[name="chemStyle"] option[value="'+this.value+'"]').index();this.value=a>0?a:""}e+=t[this.name]+this.value});var a=location.origin+"/compare/"+e+(e.length?"/":"");window.history.replaceState(window.state,document.title,a),$("#share-url").val(a)};$.fn.bindCompareForm=function(){var e=$(this).find(":input");e.filter('[name="chemStyle"]').change(function(){if($(this).val()){var t=e.filter('[name="chemTeam"]');t.val(t.val()||100);var a=e.filter('[name="chemIndividual"]');a.val(a.val()||10)}}),e.change(function(){updateChemistry(),updateComparison(),updateURL()}),$(this).find(".remove-player").click(function(){$(this).closest(".compare-player").remove(),checkSearchEnabled(),updateComparison(),updateURL()}),$(this).find(".remove-chemistry").click(function(){$(this).closest(".compare-player").removeComparedChemistry(),updateURL()})},$.fn.removeComparedChemistry=function(){var e=$(this);e.find(':input[name="chemStyle"]').val(null),e.find(':input[name="chemTeam"]').val(null),e.find(':input[name="chemIndividual"]').val(null),e.removeChemistry(),updateComparison()};