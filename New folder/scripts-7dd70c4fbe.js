function csrfSafeMethod(t){return/^(GET|HEAD|OPTIONS|TRACE)$/i.test(t)}function update_relative_dates(t){void 0===t&&(t="body"),$(t).find(".relative-date").each(function(t,e){var e=$(e),a=Date.parse(e.attr("data-iso-date"));if(void 0===a)e.text("???");else{var n=((new Date).getTime()-a)/1e3,i="";if(n<86400)if(n<300)i="Just Now";else if(n<7200){var o=(c=new Date(a)).getHours(),s=c.getMinutes(),r="am";o>12?(o-=12,r="pm"):0==o&&(o=12),s<10&&(s="0"+s),i=o+":"+s+r}else i=Math.floor(n/3600)+" hours ago";else{var c=new Date(a);i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][c.getMonth()]+". "+(c.getDate()>9?c.getDate():"0"+c.getDate()),n>15552e3&&(i+=", "+c.getFullYear())}e.text(i)}})}function timeAgo(t,e){return t?(t=parseInt(Math.round(Date.now()/1e3)-t),e&&e.short?t<0?"now":t<60?t+"s":(t=Math.round(t/60))<60?t+"m":(t=Math.round(t/60))<24?t+"h":(t=Math.round(t/24))+"d":t<0?"a moment ago":t<60?t+" second"+(t>1?"s":"")+" ago":(t=Math.round(t/60))<60?t+" minute"+(t>1?"s":"")+" ago":(t=Math.round(t/60))<24?t+" hour"+(t>1?"s":"")+" ago":(t=Math.round(t/24))<30?t+" day"+(t>1?"s":"")+" ago":(t=Math.round(t/30))+" month"+(t>1?"s":"")+" ago"):"???"}function timeUntil(t,e){return t?(t=Math.round(t-Date.now()/1e3))<0?e||"now":t<=60?t+" second"+(t>1?"s":""):(t=Math.floor(t/60))<=60?t+" minute"+(t>1?"s":""):(t=Math.floor(t/60))<=24?t+" hour"+(t>1?"s":""):(t=Math.floor(t/24))<=30?t+" day"+(t>1?"s":""):(t=Math.floor(t/30))+" month"+(t>1?"s":""):"???"}function bindPricePlatform(){function t(t){var i='[data-platform="'+(t=t||n)+'"]';a.filter(":not(.no-disable)").addClass("disabled").filter(i).removeClass("disabled"),$(".price-platform-target").addClass("hide").filter(i).removeClass("hide hidee"),$(".price-platform-bg").removeClass("ps xb pc").addClass(t),$(".price-platform-input-binding").val(t),$.cookie("futhead-settings-price-platform",t,{expires:999,path:"/"}),e(document)}function e(t){var e=document.createEvent("Event");e.initEvent("FH:onPlatformChange",!0,!1),t.dispatchEvent(e)}var a=$(".price-platform"),n=$.cookie("futhead-settings-price-platform")||"ps";t(n),function(e){e.forEach(function(e){document.addEventListener("FH:onPlatformChange:"+e,function(){t(e)})})}(["pc","xb","ps"]),a.click(function(){var e=$(this).attr("data-platform");t(e),$(this).hasClass("bin-platform-url")&&window.history.replaceState(window.state,document.title,preserve(location.href,"bin_platform",e))})}function isSize(t){var e=window.innerWidth,a=!1;return(t||"").toString().split(" ").forEach(function(t){if(!a)switch(t){case"xs":a=e<768;break;case"sm":a=e>=768&&e<992;break;case"md":a=e>=992&&e<1260;break;case"lg":a=e>=1260}}),a}function checkScroll(){window.scrollY>=navTop&&nav.find("> .container > *").length?$(document.body).addClass("fixed-page-nav"):$(document.body).removeClass("fixed-page-nav")}function loadFeaturedPrices(){var t=$('.feature-prices[data-year="18"]'),e=$.cookie("futhead-settings-price-platform")||"ps";if(t.length>0){var a=new Set;t.each(function(){a.add(parseInt($(this).data("id")))}),$.ajax({method:"get",url:"/prices/api/",data:{id:Array.from(a),year:18}}).done(function(t){$.each(t,function(t,a){var n=$('.feature-prices[data-id="'+t+'"][data-year="18"]');$.each(["ps","xb","pc"],function(t,i){a[i]&&n.empty().append('<div class="feature-price price-platform-target '+(e!==i?"hide":"")+'" data-platform="'+i+'">'+a[i].toLocaleString()+"</div>")}),n.show()})})}}function update_recent_messages(t){}function bindHrefRow(t){(t=$(t)).mouseenter(function(){t.addClass("hover")}).mouseleave(function(){t.removeClass("hover")}),t.find("> *:not(.href-row-no-link)").click(function(){var e=t.data("href");e&&(window.document.location=e)})}function get_level_display(t){return 0===t?"gold":1===t?"silver":2===t?"bronze":void 0}function updateShareModal(t){$(".share-modal-title").text(t.modal_title),$(".twitter-share-button").attr("data-text",t.twitter_text)}function sorted_by(t){if(!(void 0==t||t.length<1)){t=t.replace(/^-/,"");for(var e=$("table.table-sorted > thead > tr > th"),a=e.length;a>=0&&$(e[a-1]).attr("data-sort-attr")!=t;a--);a>0&&$("table.table-sorted > tbody > tr > td:nth-child("+a+")").each(function(){$(this).addClass("sorted")})}}function arrayContains(t,e){return t.indexOf(e)>-1}function showMessage(t){$alert=$("<div class='growl growl-static'><div class='alert alert-info alert-dismissable' role='alert'>"+t+"</div></div>"),$(document.body).append($alert),$alert.fadeTo(2e3,500).fadeOut(500,function(){$alert.alert("close")})}function getCdnUrl(){return void 0===window.cdnUrl&&(window.cdnUrl=$("body").data("cdnUrl")),window.cdnUrl}function getCdnPattern(){return void 0===window.cdnPattern&&(window.cdnPattern=new RegExp($("body").data("cdnPattern"))),window.cdnPattern}function cdnify(t){return"string"!=typeof t?t:(getCdnPattern().test(t)&&(t=t.replace(getCdnPattern(),"")),t.startsWith("http")||(t=getCdnUrl()+t),t)}function bindEmbedTrigger(t){$(t).click(function(){new Twitch.Player("twitch-embed-modal-video",{width:"100%",height:350,channel:$(this).data("channel"),autoplay:"true"});var t=$("#twitch-embed-modal");t.on("hidden.bs.modal",function(){$("#twitch-embed-modal-video").html(null),t.off("hidden.bs.modal")}).find(".modal-title").text($(this).data("title"))})}function getTwitchEmbed(t){(t=$(t)).data("type")&&!isSize(t.data("hidden"))&&$.ajax({method:"GET",url:"/twitch/"+t.data("type")+"/",data:{channel:t.data("channel")}}).done(function(e){for(var a=0;a<e.length;a++){var n=Math.random().toString(36).substring(2),i=e[a],o="twitch-embed-trigger-"+n,s=$(document.createElement("a")).attr("id",o).addClass("twitch-stream-thumbnail").attr("data-toggle","modal").attr("data-target","#twitch-embed-modal").attr("data-title",i.title).attr("data-channel",i.channelName).attr("data-twitch-feature",t.data("type")).attr("data-twitch-exp-version","v1").attr("data-twitch-embed-type","channel").attr("data-twitch-id",i.id).css("background-image","url("+i.thumbnail+")").append($(document.createElement("span")).addClass("twitch-text twitch-stream-title ellipsis").append($(document.createElement("span")).addClass("icon icon-controller-record red-i margin-r-4")).append(i.title)).append($(document.createElement("span")).addClass("twitch-text twitch-channel-viewers").append($(document.createElement("span")).addClass("icon icon-users margin-r-4")).append(i.viewers.toString())).append($(document.createElement("span")).addClass("twitch-text twitch-channel-title").append(i.channelName));t.data("class")&&s.addClass(t.data("class")),"navbar"!==t.data("type")&&s.addClass("twitch-embed-trigger"),t.append(s),bindEmbedTrigger($("#"+o))}"hidden-rendered-navbar-twitch-embed-container"===t.attr("id")&&0!==$("#nav-twitch-hover:hover").length&&showNavbarTwitchStreams()}).always(function(e){t.removeClass("loading"),e&&e.length||t.addClass("no-results")})}$.ajaxSetup({beforeSend:function(t,e){csrfSafeMethod(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",$.cookie("csrftoken"))}}),$().ready(function(){var t=$('input[name="csrfmiddlewaretoken"]').val();t&&t!=$.cookie("csrftoken")&&$.cookie("csrftoken",t,{path:""})}),function(t,e){t(".view-full").on("click",function(){t(".view-responsive").removeClass("hide"),e()}),t(".view-responsive a").on("click",function(){localStorage.isResponsive="true",t('meta[name="viewport"]').attr("content","width=device-width"),t(".view-responsive").addClass("hide")}),"false"===localStorage.isResponsive&&t(".view-responsive").removeClass("hide")}(window.jQuery,window.showFullSite);var Futhead=function(){var t=this;this.Message=function(t,e){var a=$(".messages"),n=a.find(".alert:eq(0)").clone();n.addClass(t).append(e).show(),a.find("> div").append(n).end().show()},this.Error=function(e){new t.Message("alert-error",e)},this.Success=function(e){new t.Message("alert-success",e)},this.Information=function(e){new t.Message("alert-info",e)},this.JSONMessage=function(t,n,i){var o=[a];void 0!==typeof i&&o.push(i),$.ajax({url:t,dataType:"json",data:void 0===typeof n?n:{},success:o,error:e})},$("#notify-modal .modal-footer a").click(function(t){t.preventDefault(),$("#notify-modal").modal("hide")}),this.notify=function(t,e){var a=$("#notify-modal"),n=a.find(".modal-body");void 0===e&&(e=""),n.html('<div class="'+e+'">'+t+"</div>"),a.modal()};var e=function(){new t.Error("A server error occurred. Please try again in a few minutes.")},a=function(e){if(void 0===typeof e.type||void 0===typeof e.message)t.handle_json_error();else switch(e.type){case"error":new t.Error(e.message);break;case"success":new t.Success(e.message);break;case"info":new t.Information(e.message);break;default:t.handle_json_error()}}},attr_string=function(t,e){return"GK"!=t?{1:"PAC",2:"SHO",3:"PAS",4:"DRI",5:"DEF",6:parseInt(e)>14?"PHY":"HEA"}:{1:"DIV",2:"HAN",3:"KIC",4:"REF",5:"SPE",6:"POS"}},card_class=function(t,e,a,n,i,o,s){return("playercard card-"+t+" fut"+e+" "+(isNaN(a)||a<65?"bronze":a<75?"silver":"gold")+" "+n+" "+i+" "+(s||"")).trim()},cardAttribute=function(t,e,a,n){return' \t\t<div class="playercard-attr playercard-attr'+t+'"> \t\t\t<span class="chembot-value value">'+e+'</span> \t\t\t<span class="playercard-thin">'+attr_string(a,n)[t]+'</span>             <span class="chembot-delta" data-chembot-field="attr'+t+'" data-chembot-base="'+e+'"></span> \t\t</div>'},cardFromData=function(t,e,a){if(void 0===t)return"<span></span>";e=e||"small";var n=t.card_year||t.year,i=t.rare?"":"non-rare",o=t.revision_type?t.revision_type.toLowerCase():"",s=t.position,r=n>11&&"small"===e&&!t.workrates_short_string.startsWith("?")?t.workrates_short_string:"",c=' \t\t<div class="playercard-art"></div>         <div class="playercard-rating"><span class="value">'+t.rating+'</span></div>         <div class="playercard-name">'+t.card_name+'</div>         <div class="playercard-position"><span class="value">'+s+'</span></div>         <div class="playercard-nation"><img src="'+cdnify(t.nation_image)+'" /></div>         <div class="playercard-club"><img src="'+cdnify(t.club_image)+'" /></div>         <div class="playercard-picture"><img src="'+cdnify(t.image)+'" /></div>'+cardAttribute(1,t.attr1,s,n)+cardAttribute(2,t.attr2,s,n)+cardAttribute(3,t.attr3,s,n)+cardAttribute(4,t.attr4,s,n)+cardAttribute(5,t.attr5,s,n)+cardAttribute(6,t.attr6,s,n)+'         <div class="playercard-chem hidee">CHE: <span class="value"></span></div>';return 18===t.year&&(c+='<div class="playercard-feature-price feature-prices" data-year="'+t.year+'" data-id="'+t.def_id+'"></div>'),18===n&&"GK"!==s&&null!=t.skill_moves&&null!=t.weak_foot_skill&&(c+=' \t\t\t<div class="playercard-workrates"> \t\t\t\t'+r.replace("/"," / ")+' \t\t\t</div> \t\t\t<div class="playercard-skill-move"> \t\t\t\t'+t.skill_moves+'<span class="icon icon-star"></span> SM \t\t\t</div> \t\t\t<div class="playercard-weak-foot"> \t\t\t\t'+t.weak_foot_skill+'<span class="icon icon-star"></span> WF \t\t\t</div>'),'<div class="'+card_class(e,n,t.rating,i,o,t.player_id,a)+'">'+c+"</div>"},w=$(window).width(),r_col=$(".col-right:not(.ignore-resize)"),l_col=r_col.siblings('div[class*="col-offset"]');if(w>900&&r_col.length>0&&l_col.length>0){var min_height=Math.max(r_col.height(),l_col.height());l_col.css("min-height",min_height),r_col.css("min-height",min_height)}var nav=$(".page-navigation"),navTop=(nav.offset()||{}).top-44;setTimeout(function(){for(var t=5;!navTop&&t>0;)t-=1,checkScroll()},250),$(window).scroll(checkScroll);var futhead=null;$().ready(function(){function t(){$(this).css("display","block");var t=$(this).find(".modal-dialog"),e=($(window).height()-t.height())/2;t.css("margin-top",e)}futhead=new Futhead,checkScroll();if(USER&&USER.id){$.cookie("futhead.user.id",USER.id,{path:"/",domain:window.location.hostname});try{new Fingerprint2({excludeCanvas:!0,excludeWebGL:!0,excludePlugins:!0}).get(function(t){$.cookie("futhead.uuid",t,{path:"/",domain:window.location.hostname})})}catch(t){}}else $.removeCookie("futhead.user.id",{path:"/",domain:window.location.hostname});loadFeaturedPrices(),bindPricePlatform(),$('*[target="_new"]').click(function(t){t.preventDefault(),window.open($(this).attr("href"),"newWindow",$.param({width:$(this).data("width")||300,height:$(this).data("height")||250,top:$(window).height()/2-225,left:$(window).width()/2,toolbar:0,menubar:0,location:0,scrollbars:0,directories:0}).replace("&",","))}),void 0==$.cookie("show-randomizer")&&$.cookie("show-randomizer","0",{path:"/",domain:window.location.hostname}),"1"==$.cookie("show-randomizer")&&$("#randomizer-toolbar").show(),$("a.ajax").click(function(){$(this).data("confirm")&&!confirm($(this).data("confirm"))||$.ajax({url:$(this).data("url")||"",method:$(this).data("method")||"POST"}).done(function(t){window.location.href=t.url}).fail(function(){alert("Something went wrong. :(")})}),$.each($(".smart-time.date[data-time]"),function(){$(this).text(smartDate($(this).data("time"),$(this).data("prefix"))).addClass("done")}),$.each($(".smart-time.locale[data-time]"),function(){isNaN($(this).data("time"))||$(this).text(new Date(1e3*$(this).data("time")).toLocaleDateString(window.navigator.language,{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})).addClass("done")}),$.each($(".smart-time.ago[data-time]"),function(){var t=$(this),e=function(){t.text(timeAgo(t.data("time"),{short:t.hasClass("short")}))};e(),setInterval(e,5e3),t.addClass("done")}),$.each($(".smart-time.until[data-time]"),function(){var t=$(this),e=function(){t.text(timeUntil(t.data("time"),t.data("default")))};e(),setInterval(e,1e3),t.addClass("done")}),$.each($(".permission-required"),function(){var t=$(this);"mod"==t.data("permission")&&(USER&&USER.is_staff?t.removeClass("hide"):t.remove())}),$(".toggleable").click(function(){$(this).toggleClass("enabled").blur()}),$(".tab-toggle").click(function(){var t=$(this);t.addClass("active").blur(),t.siblings().removeClass("active"),$(t.data("target")).each(function(t,e){$(e).addClass("in"),$(e).siblings().removeClass("in")})}),$("select.link-to").change(function(t){$(this).val()&&(t.preventDefault(),window.location.href=$(this).val())}),$("form.form-clean").submit(function(){$(this).find(":input[name]").each(function(){$(this).val()||$(this).attr("disabled",!0)})}),$(".embedded.embed-clear").click(function(){var t=$(this).closest(".form-group, .input-group");t.find(":input").val(null),t.find(".embed-image").removeAttr("src").css({opacity:0})});var e="0"==$.cookie("show-randomizer")?"Show":"Hide";$(".randomizer-toggle-link span").html(e+" Randomizer Toolbar"),$(".randomizer-toggle-link").on("click",function(t){t.preventDefault(),$.cookie("show-randomizer","0"==$.cookie("show-randomizer")?"1":"0",{expires:3650,path:"/",domain:window.location.hostname});var e="0"==$.cookie("show-randomizer")?"Show":"Hide";$(".randomizer-toggle-link span").html(e+" Randomizer Toolbar"),$("#randomizer-toolbar").toggle(),$(".modal").modal("hide")}),"1"!==$.cookie("hide-futhead-14-message")&&$(".futhead-14-message").fadeIn(),$(".futhead-14-message .close").click(function(){$.cookie("hide-futhead-14-message","1",{path:"/"})}),update_relative_dates(),$('*[rel="tooltip"]').tooltip(),$(".copy-to-clipboard").click(function(){return $($(this).data("target")).toClipboard()});var a=$(".navbar-search");a.on("focus blur",function(){$(this).val("")}).focus(function(){$(this).hasClass("navbar-search-sm")||($(this).addClass("active no-bg").animate({width:"600px"},200),$(this).closest("li").nextAll("li").hide(),$(".navbar .search-hide").hide())}).blur(function(){if(!$(this).hasClass("navbar-search-sm")){var t=$(this);t.removeClass("active no-bg").stop().animate({width:"46px"},200,function(){t.closest("li").nextAll("li").show(),$(".navbar .search-hide").show()})}}),void 0!==$().quicksearch&&$(".navbar-search, .mobile-navbar-search").quicksearch({size:"large",year:19,delay:350,position:{offset:"0 2"},close:function(){$("body").css("overflow","auto")},response:function(){$("body").css("overflow","hidden")},select:function(t,e){window.location.href=e.item.url}}),$(".mobile-navbar-toggle").click(function(){$("body").toggleClass("with-mobile-nav")}),$(document).keyup(function(t){a.is(":focus")?27==t.which&&(a.blur(),t.preventDefault()):$(":input:focus").length<=0&&83==t.which&&(a.focus(),t.preventDefault())}),$.each($("[data-char-limit]"),function(t,e){var a=(e=$(e)).parent(),n="character-count-"+Math.random().toString(36).slice(2,12);e.data("guid",n),e.count=function(t){i.find(".count").text(parseInt($(this).data("char-limit"))-t)},a.append('<span id="'+n+'" class="character-count font-12"><strong class="count"></strong> Remaining</span>'),a.css({position:"relative","padding-bottom":"+=20px"});var i=a.find("#"+n);i.css({position:"absolute",right:0,bottom:0}),e.keydown(function(t){var a=8==t.which||46==t.which,n=e.val().length+(a?-1:1);!a&&n>e.data("char-limit")?t.preventDefault():e.count(n)}).change(function(){e.count(e.val().length)}).trigger("change")});$(".comment-text-counter").html("You have <strong>500</strong> characters remaining"),$("textarea.limited-text").keyup(function(){$(this).val().length>500&&$(this).val($(this).val().substr(0,500));var t=500-$(this).val().length;$(this).siblings(".comment-text-counter").html("You have <strong>"+t+"</strong> characters remaining")}),-1!=window.location.href.indexOf("/13/squads/")?$("#squads-nav-link").addClass("active"):-1!=window.location.href.indexOf("/13/players/")&&$("#players-nav-link").addClass("active");var n=$(".mobile-group-list");$(".group-nav-link").click(function(){n.is(":visible")?n.slideUp("fast"):n.slideDown("fast")});var i=$(".mobile-search-container");$(".mobile-search").click(function(){i.is(":visible")?i.slideUp("fast"):(i.slideDown("fast"),i.find("input").focus())});try{md.phone()&&($(".dropdown a").click(function(){$(this).closest(".dropdown").siblings().removeClass("dropdown-open"),$(this).closest(".dropdown").toggleClass("dropdown-open"),$(this).closest(".dropdown").hasClass("open")&&$(this).closest(".dropdown").removeClass("dropdown-open")}),$(".show-hidden-subnav").click(function(){$(this).hide(),$(".player-filters").removeClass("hidden-xs")}),$(".desktop-switch").click(function(){viewport=document.querySelector("meta[name=viewport]"),viewport.setAttribute("content","width=1280"),$("body").css("padding","0"),$(".navbar-fixed-top").css("margin-bottom","0"),$.cookie("mobile-desktop-site","1",{path:"/"})}),$(".mobile-switch").click(function(){$.cookie("mobile-desktop-site","0",{path:"/"}),viewport=document.querySelector("meta[name=viewport]"),viewport.setAttribute("content","width=device-width, initial-scale=1")}))}catch(t){}calc_tax=function(t){if(digits=function(t){return null===t?"N/A":t.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(t)){var e=Math.round(.95*t),a=Math.round(.05*t),n=Math.round(t/.95);$(".calc-you-get").html(digits(e)),$(".calc-ea-gets").html(digits(a)),$(".calc-sell-at").html(digits(n))}};var o=$(".tax-calc input");o.keyup(function(){calc_tax($(this).val())}),$("#tax-modal").on("shown.bs.modal",function(){o.focus()}),$(".clear-tax").click(function(){$(".calc-val").text("0").val("")}),$(".btn-modal").click(function(){var t=$($(this).attr("href"));t.is(":visible")?t.modal("hide"):t.modal("show")}),$(".modal-close").click(function(){$(this).parents(".modal").modal("hide")}),$(".mobile-toggle[data-target]").click(function(){$($(this).data("target")).removeClass($(this).data("remove")),$(this).remove()}),$(".login-modal .btn-futhead").click(function(){$(".login-form").is(":visible")?$(".login-form").fadeOut("fast",function(){$(".reg-form").fadeIn("fast"),$(".login-modal .btn-futhead").html("Already a user? Sign in!")}):$(".reg-form").fadeOut("fast",function(){$(".login-form").fadeIn("fast"),$(".login-modal .btn-futhead").html("New to Futhead? Sign up!")})}),new LazyLoad,$(".modal").on("shown.bs.modal",function(){$(this).find("[data-highlight]").select()}).on("show.bs.modal",t),$(window).on("resize",function(){$(".modal:visible").each(t)}),$("#ShareModal").on("show.bs.modal",function(){setTimeout(function(){$("#share-url").select()},10)}),$("input.focus-select").focus(function(){$(this).select()}),$(".quick-input").click(function(){$(this).select()}).keypress(function(t){13==t.which&&$(this).blur()}),$(".click-clear").click(function(){$(this).val("")}),$(".social-popup").click(function(t){t.preventDefault(),window.open($(this).attr("href"),"twitterwindow","height=450, width=550, top="+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")}),$(".tooltip-enabled").tooltip(),$(".random-card").tooltip(),$(".enable-popover").hover(function(){if(!isSize($(this).data("hidden"))){var t=$(this).popover("show").data("bs.popover").tip(),e={};$(this).data("top")&&(e.top=parseFloat(t.css("top"))+parseFloat($(this).data("top"))),$(this).data("bottom")&&(e.bottom=parseFloat(t.css("bottom"))+parseFloat($(this).data("bottom"))),$(this).data("left")&&(e.left=parseFloat(t.css("left"))+parseFloat($(this).data("left"))),$(this).data("right")&&(e.right=parseFloat(t.css("right"))+parseFloat($(this).data("right"))),t.css(e)}},function(){$(this).popover("hide")}),void 0!==$().hoverIntent&&$(".dropdown-list-btn").hoverIntent(function(){$(this).addClass("active"),$(this).find(".dropdown-list").slideDown("fast")},function(){$(this).removeClass("active"),$(this).find(".dropdown-list").slideUp("fast")}),$(".futhead-list-add a").click(function(){return $.ajax({url:$(this).attr("href")}),!1}),$("*[data-form-submit]").click(function(){$("#"+$(this).data("form-submit")).submit()}),$(".btn-submit").click(function(){$("."+$(this).attr("data-form")).submit()}),$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="slide"][data-target]').click(function(){var t=$($(this).data("target")),e=parseInt(t.data("height"))||0,a=e+t.children().first().outerHeight()+15;t.hasClass("sliding")||(t.addClass("sliding").finish(),t.hasClass("in")?t.animate({"padding-bottom":e},{duration:300,fail:function(){$(this).css({"padding-bottom":e})},always:function(){$(this).removeClass("in sliding")}}):t.animate({"padding-bottom":a},{duration:300,fail:function(){$(this).css({"padding-bottom":a})},always:function(){$(this).addClass("in").removeClass("sliding")}}))}),$(document).on("click",".report-link",function(t){var e=$(this).parents(".report"),a=e.attr("data-comment-id")||e.attr("data-object-id"),n=e.attr("data-comment-type")||e.attr("data-content-type-id");return function(e,a,n,i){t.preventDefault();var o=$("#report-modal"),s=e.attr("data-object-type");o.find("textarea").val(""),o.find("#report-submit-success,#report-submit-error").hide(),o.find(".submit").html("Submit Report").removeClass("disabled"),o.find(".cancel").unbind(),o.find(".submit").unbind(),o.find("h3").text("Report "+s),o.modal(),o.find(".cancel").click(function(t){return function(e,a,n){t.preventDefault(),n.modal("hide")}($(this),0,o)}),o.find(".submit").click(function(t){return function(e,a,n,i,s,r){t.preventDefault(),o.find(".submit").addClass("disabled").html('Submit Report <img src="'+cdnify("img/spinner.gif")+'"/>'),$.post("/moderation/report/",{reason:o.find("select").val(),description:o.find("textarea").val(),content_type:s,object_id:r}).success(function(){return function(t){t.find("#report-submit-success").show(),t.find(".cancel").unbind(),t.find(".submit").unbind(),setTimeout(function(){t.modal("hide")},1500)}(n)}).error(function(){return function(t){t.find("#report-submit-error").show(),t.find(".submit").html("Submit Report").removeClass("disabled")}(n)})}($(this),0,o,0,n,i)})}($(this),0,n,a)}),function(){function t(t){return s.replace("/0/","/"+t+"/")}function e(t){return c.replace("/1/","/"+t+"/")}function a(t){t.removeClass("disabled")}function n(t){t.addClass("disabled")}function i(){o.find(".notification").each(function(e,a){var n=(a=$(a)).attr("data-id"),i=a.find(".mark-read");a.find(".link");i.click(function(e){e.preventDefault(),i.hide(),a.removeClass("unread"),$.post(t(n));var o=$(".notification-alert"),s=parseInt(o.data("count"))-1;(isNaN(s)||s<1)&&o.hide(),isNaN(s)||o.data("count",s)})})}var o=$(".notifications"),s=o.attr("data-read-url"),r=o.attr("data-read-all-url"),c=o.attr("data-paginate-url"),d=$("#notifications-modal").find(".prev"),l=$("#notifications-modal").find(".next"),u=1,m=parseInt(o.attr("data-total-pages"),10),h=o.find(".replace-holder"),p=$("#notifications-modal").find(".mark-all-read");update_relative_dates(o),p.click(function(t){t.preventDefault(),$.post(r),n(p),o.find(".notification").removeClass("unread").find(".mark-read").hide(),$(".notification-alert").hide()}),d.click(function(t){t.preventDefault(),$(this).hasClass("disabled")||(1==(u-=1)&&n(d),a(l),$.get(e(u),function(t){h.empty(),h.append(t),$(".tooltip-enabled").tooltip(),i()}))}),l.click(function(t){t.preventDefault(),$(this).hasClass("disabled")||((u+=1)==m&&n(l),a(d),$.get(e(u),function(t){h.empty(),h.append(t),update_relative_dates(o),$(".tooltip-enabled").tooltip(),i()}))}),i()}(),$("input.click-select").click(function(){$(this).select()}),USER&&update_recent_messages();for(var s=$(".href-row"),r=0;r<s.length;r++)bindHrefRow(s[r]);$(".alerts .growl").each(function(t,e){var a=$(e);setTimeout(function(){a.animate({opacity:0},350,"linear",function(){a.remove()})},2500)}),$(".embedded-click").embeddedClick(),$(".embedded-link[data-href]").click(function(t){t.preventDefault(),t.stopPropagation(),$(this).data("target")?window.open($(this).data("href"),$(this).data("target")):window.location.href=$(this).data("href")}),$.each($(".top-talk"),function(){var t=$(this),e=t.data(),a={size:5,page:1};a[e.type]=e.eaid,$.ajax({url:"/talk/api/",method:"get",data:a}).done(function(e){e.topics&&e.topics.length&&(t.append('<ul class="dropdown-menu"></ul>'),$.each(e.topics,function(e,a){t.find("ul").append('<li><a class="text-left" href="'+a.url+'"><img class="img-28 margin-r-8" src="'+cdnify(a.image)+'">'+a.title+"</a></li>")}))})})});var badgify=function(t){for(var e=parseInt(t),a=[90,80,70,50,0],n=0;n<a.length;n++)if(e>=a[n]){e=a[n];break}return"igs-"+e+" igs-value-"+t},smartDate=function(t,e){if(!isNaN(t)){var a=new Date,n=new Date(1e3*t),i=a.getDate()==n.getDate(),o=a.getMonth()==n.getMonth(),s=a.getFullYear()==n.getFullYear();if(i&&o&&s){var r=n.getHours(),c=r%12||12;return(e?" at ":"")+c+":"+("00"+n.getMinutes()).slice(-2)+" "+(r<12?"am":"pm")}return s?(e?" on ":"")+n.getShortMonthName()+" "+n.getDate():(e?" on ":"")+[n.getMonth()+1,n.getDate(),n.getYear()%100].join("/")}},preventAnonRequest=function(t){if(!USER)return t?alert("You must be logged in "+t+"!"):alert("Something went wrong!"),!0};$.urlParameter=function(t){for(var e=decodeURIComponent(window.location.search.substring(1)).split("&"),a=0;a<e.length;a++){var n=e[a].split("=");if(n[0]===t)return void 0===n[1]||n[1]}},$.fn.smartTime=function(t,e){var a=$(this),n=function(){a.text(t(a.data("time")))};n(),setInterval(n,e),this.addClass("done")},$.fn.tooltipExec=$.fn.tooltip,$.fn.tooltip=function(t){return isSize("lg md")?this.tooltipExec(t):this},$.fn.removeClassByPattern=function(t){return this.removeClass(function(e,a){return(a.match(new RegExp("(^|\\s)"+t+"($|\\s)","g"))||[]).join(" ")})},$.fn.insert=function(t,e){return e=e||0,$(t)[e<0?"insertAfter":"insertBefore"](this.children().eq(e)),this},$.fn.toClipboard=function(){return!!this.is("input,textarea")&&(this.select(),document.execCommand("copy"))},$.fn.embeddedClick=function(){return $(this).click(function(t){t.stopPropagation()}),$(this)},$.fn.animateNumber=function(t){for(var e=$(this),a=e.parent(),n=parseInt(e.data("value")),i=[],o=t.emphasis||[],s=0;s<o.length-1;s++)for(var r=o[s];r<o[s+1];)i.push(r),r+=o[s];var c=function(t){if(t&&i&&i.length)for(var e=0;e<i.length;e++)if(t>=i[e]){a.prepend('<strong class="emphasis">'+i[e].toString().intComma()+"</strong>"),i=i.slice(e+1,i.length);break}};return setTimeout(function(){$({value:0}).animate({value:n},{duration:t.duration||4e3,easing:t.easing||"easeOutCubic",step:function(){e.text(parseInt(this.value).toString().intComma()),c(this.value)}}).promise().done(function(){e.text(n.toString().intComma())})},t.delay||0),e},$.fn.bindWithDelay=function(t,e,a,n,i){return $.isFunction(e)&&(i=n,n=a,a=e,e=void 0),a.guid=a.guid||$.guid&&$.guid++,this.each(function(){function o(){var t=$.extend(!0,{},arguments[0]),e=this;i||(clearTimeout(s),s=null),s||(s=setTimeout(function(){s=null,a.apply(e,[t])},n))}var s=null;o.guid=a.guid,$(this).bind(t,e,o)})},Number.prototype.signum=function(){return(this>0?"+":"")+this.toString()},Number.prototype.intComma=function(){return this.toString().intComma()},Number.prototype.eq=function(t){return this==t},Number.prototype.gt=function(t){return this>t},Number.prototype.gte=function(t){return this>=t},Number.prototype.lt=function(t){return this<t},Number.prototype.lte=function(t){return this<=t},String.prototype.intComma=function(){return this.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},String.prototype.truncate=function(t){return this.length>t?this.substring(0,t).trim()+"...":this.trim()},String.prototype.camelCase=function(){return this.replace(/(-|_|\s)+([a-z])/g,function(t){return t[1].toUpperCase()})},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},String.prototype.sanitizeTags=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;")},String.prototype.sanitizeJavascript=function(){return this.sanitize("<script.*?>","</script.*?>")},String.prototype.sanitize=function(){for(var t=this,e=0;e<arguments.length;e++)t=t.replace(new RegExp(arguments[e],"ig"),"");return t||this},Date.prototype.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.prototype.getMonthName=function(){return this.monthNames[this.getMonth()]},Date.prototype.getShortMonthName=function(){return this.getMonthName().substr(0,3)};var author,newComments,rootDepth,validUrl=/((?:https?:\/\/)?(?:(?:(?:www|forums)\.)?futhead\.com|(?:www\.)?whoscored\.com)(?:\/.*?))($|\s|<br>)/g,playerUrl=/\/(\d{2})\/players?\/(\d+)/g,updatePlayerText=function(t){var e=$(t.attr("hover-target")+" .playercard"),a=e.data("playerRating"),n=e.data("playerFullName");t.text(n+" "+a)},urlify=function(){$(".comment-body.fresh").each(function(t,e){validUrl.lastIndex=0,(e=$(e)).html(e.html().replace(validUrl,'<a href="$1" class="auto-link fresh" target="_blank">$1</a>$2'))}),$(".auto-link.fresh").each(function(t,e){playerUrl.lastIndex=0,e=$(e);var a=playerUrl.exec(e.attr("href"));if(a){var n=a[1],i=a[2],o="#player-hover-"+n+"-"+i;if(parseInt(n)>18)return;e.attr("hover-target",o),e.hover(function(){var t=e.offset();$(e.attr("hover-target")).css("top",t.top-200+"px").css("left",t.left+"px").show()},function(){$(e.attr("hover-target")).hide()});var s;s=e.attr("href").includes("/fifa-mobile/")?"fifa-mobile":"ut",$(o).length?e.hasClass("no-name-update")||updatePlayerText(e):$.ajax({url:"/"+s+"/card/"+n+"/"+i+"/small/",method:"get",success:function(t){var a=o.substring(1);$("body").append('<div id="'+a+'" class="link-hover-target hidee">'+t+"</div>"),e.hasClass("no-name-update")||updatePlayerText(e)}})}})},addVoteBindings=function(t){var e=t.data();t.find("> .content .voteable").click(function(){var t=$(this),a=t.data("direction");preventAnonRequest("to vote")||$.ajax({url:"/votes/vote/"+e.commentType+"/"+e.commentId+"/"+a+"/",method:"post",success:function(e){if(e.success){voteStatusColor(t);var n=t.siblings(".vote-sum"),i=parseInt(n.text());t.closest(".comment").is(".starred")||n.text(i+("up"==a?1:-1))}else"error"==e.type?alert(e.message):alert("Something went wrong. Try again later.")},error:function(){alert("Something went wrong. Try again later.")}})})},_updateCharacterCount=function(t,e,a,n){var i=a-(t.val()&&t.val().length||0);e.text(i),e.removeClass(n.join(" ")),e.addClass(getColorClassForCommentLength(i))},bindCommentCharacterCount=function(t){if(!(USER&&USER.groups.includes("mod"))){var e=t.find("#content"),a=t.find(".comment-character-count"),n=["fh-green-light","fh-yellow","fh-red-light"];_updateCharacterCount(e,a,500,n),e.bindWithDelay("keyup",function(){_updateCharacterCount(e,a,500,n)},200)}},unbindCommentCharacterCount=function(t){t.find("#content").unbind("keyup")},addEventBindings=function(t){var e=t.find(".fresh");e.filter(".paginate-top, .paginate-sub").click(function(t){appendComments(t.target.closest(".comment, .comments"))}),e.filter(".paginate-dive").click(function(t){injectComments(t.target.closest(".comment, .comments"))}),e.filter(".comment-show").find("a").click(function(){var t=$(this).closest(".comment-show"),e=t.siblings();t.remove(),e.css({opacity:0}).show().animate({opacity:1},200)}),e.filter(".comment-util").each(function(t,e){var a=(e=$(e)).closest(".comment");e.find(".sticky, .unsticky").click(function(){var t=$(this),n=t.hasClass("sticky");$.ajax({url:"/comments/sticky/",method:"post",data:{sticky:n,commentId:a.data("comment-id")},success:function(){t.toggleClass("sticky unsticky").text(n?"unsticky":"sticky").unbind(),e.addClass("fresh"),addEventBindings(a);var i=a.closest(".children");n&&!a.is(":first-child")&&i.find(".comment").length>1?a.slideUp(200,function(){$(this).prependTo(i).toggleClass("sticky").css({opacity:0}).slideDown(200).animate({opacity:1},200)}):a.toggleClass("sticky")}})}),e.find(".delete").click(function(){confirm("Are you sure you want to delete this comment?")&&$.ajax({url:"/comments/delete/"+a.data("comment-id")+"/",type:"post",success:function(t){t.message?alert(t.message):a.animate({opacity:0},150,"easeInCubic").slideUp(200,function(){$(this).remove()})},error:function(){alert("There was an error deleting the comment. Please try again.")}})}),e.find(".moderate").click(function(){confirm("Are you sure you want to moderate this comment?")&&$.ajax({url:"/comments/moderate/"+a.data("comment-id")+"/",type:"post",success:function(t){t.message?alert(t.message):t.delete?a.animate({opacity:0},150,"easeInCubic").slideUp(200,function(){$(this).remove()}):(e.siblings(".comment-body").fadeOut(200,function(){$(this).text("[Moderated]")}).fadeIn(200),e.find(".report-link, .moderate").fadeOut(200,function(){$(this).remove()}))},error:function(){alert("There was an error deleting the comment. Please try again.")}})}),e.find(".no-reply").click(function(){alert("You must log in to reply.")}),e.find(".reply").click(function(){var t=$(this).closest(".comment-util").find(".comment-reply");t.slideDown(200).find("#content").focus(),bindCommentCharacterCount(t)}),e.find(".comment-reply").submit(function(t){var e=$(this),a=e.find(".error-text"),n=$(e.data("embed")),i=n.data(),o=e.find('button[type="submit"]');o.prop("disabled",!0),t.preventDefault(),a.text("").hide(),e.removeClass("has-error"),preventAnonRequest("to comment")?o.prop("disabled",!1):$.ajax({method:"post",url:"/comments/reply/"+i.parentId+"/",data:e.serialize(),success:function(t){if(t.message)a.text(t.message).show(),e.addClass("has-error");else{e.hide().trigger("reset");var i=n.find("> .content"),o=n.find("> .children");o.length<1&&(n.append('<div class="children"></div>'),o=n.find("> .children")),i.addClass("has-children"),o.prepend(parseComment({item:t,hide:!0})),o.find("> .comment:first-child").slideDown(200).animate({opacity:1},300,"easeInCubic"),addEventBindings(n),urlify(),cleanUpFresh()}},complete:function(){o.prop("disabled",!1)}})}).find(".cancel").click(function(){var t=$(this).closest("form");t.find(".error-text").text("").hide(),t.removeClass("has-error"),t.slideUp(200)})})},voteStatusColor=function(t){t.unbind().css({cursor:"default",color:"#940000"}),t.unbind().siblings(".vote").css({cursor:"default",opacity:0})},cleanUpFresh=function(){$(".fresh").removeClass("fresh")},parseComment=function(t){var e=t.item,a=" data-content-type="+e.content_type,n=" data-object-id="+e.object_id,i=" data-parent-id="+e.id,o=t.more?'<div class="paginate-wrap"><button class="btn btn-grey btn-futhead-hover paginate paginate-dive fresh font-10">More <span class="icon icon-chevron-thin-down glyphicon glyphicon-triangle-bottom"></span></button></div>':"",s=t.hide?"display: none; opacity: 0;":"",r=e.isDetailFocus?" comment-focus":"",c=e.depth%2==0?" depth-even":" depth-odd",d=0===e.depth&&e.sticky?" sticky":"",l=e.starred?" starred":"",u=!(e.sticky||e.starred)&&e.vote_sum<-5,m=author&&e.user==author?" author":"",h=USER&&USER.is_talk_mod&&window.location.pathname.startsWith("/talk/");return'<div id="comment-'+e.id+'" class="comment report '+r+c+l+d+m+'" data-dive="1" data-comment-id="'+e.id+'" data-comment-type="10"'+i+a+n+' data-depth="'+(e.depth||0)+'" style="'+s+'"><div class="content clearfix depth-'+(e.depth||0)+((t.children||[]).length?" has-children":"")+'">'+(u?'<div class="comment-show fresh">Comment has been hidden due to negative feedback. <a class="cursor-pointer">Click</a> to show.</div>':"")+'<div class="comment-header fresh-'+e.user+(u?" hidee":" ")+'"><a href="'+e.user_url+'" class="username"><img class="avatar">'+e.username+'</a><span class="level"></span><span class="badges"></span><span class="karma"></span><span class="time">'+smartDate(e.created_timestamp)+'</span></div><div class="comment-vote fresh '+(u?"hidee":"")+'"><a class="vote '+(e.moderated?"opacity-0":"up-vote cursor-pointer")+' grey heavy-gray" data-direction="up" '+(e.moderated?'style="opacity: 0;"':"")+'><span class="icon icon-chevron-thin-up glyphicon glyphicon-menu-up"></span></a><div class="vote-sum font-16 font-bold" data-sum="'+e.vote_sum+'"><span class="integer">'+e.vote_sum+'</span><span class="star icon icon-star glyphicon glyphicon-star"></span></div><a class="vote '+(e.moderated?"opacity-0":"down-vote cursor-pointer")+' grey heavy-gray" data-direction="down" '+(e.moderated?'style="opacity: 0;"':"")+'><span class="icon icon-chevron-thin-down glyphicon glyphicon-menu-down"></span></a></div><div class="comment-wrap '+(u?"hidee":"")+'"><div class="comment-body fresh">'+e.content.sanitizeTags().replace(/\r?\n/g,"<br>")+'</div><div class="comment-util fresh"><div class="actions"><a href="'+e.url+'" class="permalink" target="_blank">permalink</a>'+(USER&&!e.moderated?'<a class="report-link">report</a>':"")+(USER&&(USER.is_staff||h)&&!e.moderated?'<a class="moderate">moderate</a>':"")+(USER&&(USER.is_staff||USER.id==e.user)?'<a class="delete">delete</a>':"")+(USER&&USER.is_staff&&0==e.depth?'<a class="'+(e.sticky?"un":"")+'sticky">'+(e.sticky?"un":"")+"sticky</a>":"")+'<a class="btn btn-grey btn-futhead-hover btn-sm '+(USER?"":"no-")+'reply">reply</a></div><form class="comment-reply row margin-t-10 margin-top-10 hidee" data-embed="#comment-'+e.id+'" data-type="embedded"><div class="col-md-9 col-lg-6"><div class="form-group margin-b-4"><textarea id="content" class="form-control" name="content" rows="4" placeholder="Reply to '+e.username+'"></textarea><em class="error-text fh-red"></em></div><div class="pull-left"><span class="font-12 font-bold comment-character-count"></span></div><div class="pull-right"><span class="cursor-pointer font-12 grey heavy-gray margin-r-10">Notify Followers <input type="checkbox" name="notify"></span><button class="btn btn-default btn-sm margin-r-4 cancel" type="reset">Cancel</button><button class="btn btn-grey btn-futhead-hover btn-sm" type="submit">Submit</button></div></div></form></div></div></div>'+traverse(t.children)+o+"</div>"},sig_cache={},injectSignatures=function(t){$.each(t||[],function(t,e){var a="fresh-"+e;$.each($("."+a),function(t,n){var i=sig_cache[e];i&&((n=$(n)).removeClass(a),n.find(".avatar").attr("src",cdnify(i.avatar||"img/favicon-light.png")),i.level&&i.level_class&&n.find(".level").addClass("comment-item "+i.level_class).html('<span class="comment-item-text">'+i.level+"</span>"),i.badge_class&&i.badge_text&&n.find(".badges").addClass("comment-item "+i.badge_class).html('<span class="comment-item-text">'+i.badge_text+"</span>"),void 0!=i.karma&&n.find(".karma").html('<span class="icon icon-heart glyphicon glyphicon-heart"></span>'+i.karma))})})},fetchSignatures=function(t){var e=t.filter(function(t){return!sig_cache[t]});e.length>0?$.ajax({method:"GET",url:"/comments/get/signature/",data:{id:e},traditional:!0}).done(function(t){$.each(t.signatures,function(){sig_cache[this.user_id]=this})}).always(function(){injectSignatures(t)}):injectSignatures(t)},getOrder=function(){var t=$(".comments").data("order");return arrayContains(["hot","new","top"],t)||(t="top"),t},traverse=function(t){var e="";return $.each(t||[],function(t,a){newComments.push(a.item.id),e+=parseComment(a)}),e.length?'<div class="children">'+e+"</div>":""},appendComments=function(t,e){_fetchComments(t,!1,e)},injectComments=function(t,e){_fetchComments(t,!0,e)},_fetchComments=function(t,e,a){if(t=$(t),newComments=[],t.data("object-id")||t.data("parent-id")){t.find("> .paginate-wrap, > .paginate, > .error").remove(),t.addClass("loading-comments");var n=t.data();n.order=a||getOrder(),$.ajax({url:"/comments/get/"+t.data("content-type")+"/"+t.data("object-id")+"/",method:"get",data:n,error:function(){t.append('<div class="error">Failed to load comments. Please refresh the page to try again.</div>')},success:function(a){var n=t.data("page")||1;t.data("page",a.next_page),e&&t.find("> .children").remove(),t.append(traverse(a.comments)),fetchSignatures(a.users),a.comments&&a.comments.length&&t.find(".reply-collapse").removeClass("hidee hide"),a.next_page?a.top_level?t.append('<button class="btn btn-grey btn-futhead-hover paginate paginate-top fresh">Load More Comments</button>'):t.append('<div class="paginate-wrap"><button class="btn btn-grey btn-futhead-hover paginate paginate-sub fresh font-10">More <span class="icon icon-chevron-thin-down glyphicon glyphicon-triangle-bottom"></span></button></div>'):a.top_level&&1==n&&(a.comments||[]).length<=0&&(t.find(".cancel, .reply-collapse").remove(),t.find(".comment-reply").addClass("in")),addEventBindings(t),urlify(),cleanUpFresh()}}).always(function(){$(".comment-order.active").removeClass("active"),$('.comment-order[data-order="'+n.order+'"]').addClass("active"),t.removeClass("pre-load loading-comments"),$.ajax({url:"/votes/status/"+t.data("content-type")+"/"+t.data("object-id")+"/",method:"get",data:{no_comments:!0},success:function(t){t.status={},void 0!==t.comments&&($.each(t.comments,function(e,a){t.status[a.pk]=a.direction}),$.each(newComments,function(e,a){var n=t.status[a],i=$("#comment-"+a);void 0===n?(i.find("> .content .vote").addClass("voteable"),addVoteBindings(i)):voteStatusColor(i.find("> .content ."+(0==n?"up":"down")+"-vote"))}))}})})}},getColorClassForCommentLength=function(t){return t>=200?"fh-green-light":t>=50?"fh-yellow":t<50?"fh-red-light":void 0};$().ready(function(){var t=$(".comments");appendComments(t,$.cookie("futhead.comment.order")),author=t.data("author-id"),t.find(".header").show(),rootDepth=parseInt(t.data("depth"))||0;var e=$("#comment-reply-collapse");bindCommentCharacterCount(e),e.on("shown.bs.collapse",function(){var t=$(this);t.find("#content").focus(),bindCommentCharacterCount(t)}).on("hidden.bs.collapse",function(){var t=$(this);t.find("#content").val(null),unbindCommentCharacterCount(t)}),$(".comment-order").click(function(){var e=$(this).data("order");t.data("order")!=e&&(t.data("page",1).data("order",e),injectComments(t,e),$.cookie("futhead.comment.order",e))}),$(".comment-reply").submit(function(e){var a=$(this),n=a.find(".error-text"),i=$(a.data("embed")),o=i.data(),s=a.find('button[type="submit"]');s.prop("disabled",!0),e.preventDefault(),n.text("").hide(),a.removeClass("has-error"),preventAnonRequest("to comment")?s.prop("disabled",!1):$.ajax({method:"post",url:"/comments/create/"+o.contentType+"/"+o.objectId+"/",data:a.serialize(),success:function(e){if(e.error)n.text(e.message).show(),a.addClass("has-error");else{a.trigger("reset");var o=i.find("> .children");o.length<1&&(i.append('<div class="children"></div>'),o=i.find("> .children")),o.prepend(parseComment({item:e,hide:!0})),o.find("> .comment:first-child").slideDown(200).animate({opacity:1},300,"easeInCubic"),addEventBindings(t),urlify(),cleanUpFresh()}},complete:function(){s.prop("disabled",!1)}})}).find(".cancel").click(function(){var t=$(this).closest("form");t.find(".error-text").text("").hide(),t.removeClass("has-error")});var a=$("#comment-sidebar");a.length>0&&($("#to-top-of-comments").click(function(){$("html, body").stop().animate({scrollTop:$("#comment-wrapper").offset().top-90},200),$(this).blur()}),$("#to-top-of-page").click(function(){$("html, body").stop().animate({scrollTop:0},200),$(this).blur()}),new StickySidebar("#comment-sidebar",{innerWrapperSelector:".sticky-sidebar__inner",stickyClass:"sticky-sidebar__glue--affixed",topSpacing:a.hasClass("sticky-sidebar--no-navbar")?50:90}))}),$().ready(function(){function t(t){var e,a=0;if(0===t.length)return a;for(e=0;e<t.length;e++)a=(a<<5)-a+t.charCodeAt(e),a|=0;return a}$("form.validate").each(function(){this.hashCode=t($(this).serialize())}).submit(function(){this.submitting=!0}),$(".btn-group.btn-group-radio .btn").click(function(){$(this).is(".disabled, [disabled]")||($(this).is(".active")?$(this).removeClass("active"):($(this).addClass("active"),$(this).siblings().removeClass("active")))}),window.onbeforeunload=function(){for(var e=!0,a=$("form.validate"),n=0;n<a.length;n++){var i=a[n];i.submitting||i.hashCode===t($(i).serialize())||(e=!1),i.submitting=!1}if(!e)return"Are you sure you want to lose unsaved changes?"}});var defaults={autoFocus:!0,minLength:2,delay:250};$.fn.quicksearch=function(t){var e=$(this);if(!(e.length<1))return e.each(function(){var e=$(this),a=$.ui.autocomplete().options;$.extend(a,t),$.extend(a,defaults),$.extend(a,e.data()),a.type=a.type||$(this).data("searchType"),a.source=a.source||"/quicksearch/"+(a.admin?"admin/":"")+a.type+"/"+(a.year?a.year+"/":""),$.each(e,function(t,e){$(e).autocomplete(a).data("uiAutocomplete")._renderItem=render(a.type,a.size,a.extraClass)})}),e};var render=function(t,e,a){return a=a||"",function(n,i){switch("string"==typeof i.type&&i.type||t){case"player":$(n).addClass("quicksearch "+e+" "+a);var o=get_level_display(i.level),s=i.revision_type?i.revision_type.toLowerCase():"";return $('<li class="fut'+i.year+" "+o+" "+s+'"></li>').data("item.autocomplete",i).append('<a data-id="'+i.id+'" data-slug="'+i.slug+'">'+("large"==e?'<img class="picture" src="'+cdnify(i.image)+'">':"")+'<img class="clubpicture" src="'+cdnify(i.club_image)+'"><img class="nationpicture" src="'+cdnify(i.nation_image)+'"><span class="name">'+i.full_name+"</span> ("+i.position+")"+("talk"==e?'<img class="picture pull-right" src="'+cdnify(i.image)+'">':'<span class="quicksearch-rating '+o+" "+s+'">'+i.rating+"</span>")+"</a>").appendTo(n);case"fm-player":return $(n).addClass("quicksearch "+e+" "+a),$('<li class="fut17 '+i.quality+'"></li>').data("item.autocomplete",i).append('<a data-id="'+i.id+'" data-slug="'+i.slug+'">'+("large"==e?'<img class="picture" src="'+cdnify(i.image)+'">':"")+'<img class="clubpicture" src="'+cdnify(i.club_image)+'"><img class="nationpicture" src="'+cdnify(i.nation_image)+'"><span class="name">'+i.name+"</span> ("+i.position+")"+("talk"==e?'<img class="picture pull-right" src="'+cdnify(i.image)+'">':'<span class="quicksearch-rating '+i.quality+'">'+i.rating+"</span>")+"</a>").appendTo(n);case"champ-profile":return $(n).addClass("quicksearch "+e+" "+a),$("<li></li>").data("item.autocomplete",i).append('<a class="padding-8 display-block"><img class="img-24 margin-r-8" src="'+i.platform+'"><img class="img-24 margin-r-8" src="'+i.region+'"><span class="name">'+i.name+"</span></a>").appendTo(n);case"club":case"league":case"nation":return $(n).addClass("quicksearch "+e+" "+a),$("<li></li>").data("item.autocomplete",i).append('<a data-id="'+i.pk+'"><img class="'+i.type+'picture" src="'+cdnify(i.image)+'"> <span class="name">'+i.name+"</span></a>").appendTo(n);case"badge":case"ball":case"kit":case"stadium":return $(n).addClass("quicksearch "+e+" "+a),$("<li></li>").data("item.autocomplete",i).append('<a data-id="'+i.pk+'"><img style="width: 30px;" src="'+cdnify(i.image)+'"><span class="name">'+i.name+"</span></a>").appendTo(n);case"user":return $(n).addClass("quicksearch short "+a),$("<li></li>").data("item.autocomplete",i).append('<a href="javascript:;" class="font-16">'+i.username+'<strong class="pull-right">'+i.id+"</strong></a>").appendTo(n);case"message-target":return $(n).addClass("quicksearch short "+a),$("<li></li>").data("item.autocomplete",i).append('<a href="javascript:;" class="font-16">'+i.name+"</a>").appendTo(n);default:return $.ui.autocomplete()._renderItem(n,i)}}},randomizer_voted=function(){var t=$(".view-squad"),e=t.find("a");t.removeClass("disabled"),e.removeClass("tooltip-enabled").attr("data-original-title","").attr("href",e.attr("data-href")),$(".vote-count").removeClass("hidee")},emphasize_my_vote=function(t){var e=void 0!=t?function(t){t.animate({opacity:.2},200)}:function(t){t.css("opacity","0.30")};void 0!=t?(e($(".obj-"+(t?"down":"up")+"-vote")),randomizer_voted()):void 0!==$(".vote-widget").data("voteStatusUrl")&&$.getJSON($(".vote-widget").data("voteStatusUrl"),function(t){"number"==typeof t.object&&(e($(".obj-"+(0==t.object?"down":"up")+"-vote")),randomizer_voted())})},format_vote_sum=function(t){"number"==typeof t?$(".obj-vote-sum").text(t.signum()):$(".obj-vote-sum").text("???")},cast_vote=function(t){return function(e){var a=$(this);e.preventDefault(),preventAnonRequest("to vote")||$.ajax({type:"POST",url:a.data().url,success:function(e){if(e.type&&"error"===e.type&&e.message)alert(e.message);else{var a=$(".obj-vote-sum");a.length>0&&format_vote_sum(t(parseInt(/-?\d+/g.exec(a.text())[0]))),emphasize_my_vote(t(0)>0)}}}).done(function(){a.blur()})}};$().ready(function(){try{$(".obj-up-vote").click(cast_vote(function(t){return t+1})),$(".obj-down-vote").click(cast_vote(function(t){return t-1})),void 0!==$(".vote-widget").data("voteSumUrl")&&$.get($(".vote-widget").data("voteSumUrl"),function(t){format_vote_sum(parseInt(t,10))}),emphasize_my_vote()}catch(t){}}),$().ready(function(){$("body").append('<div id="twitch-embed-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="twitch-embed-modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><h4 class="modal-title ellipsis ellipsis-90"></h4></div><div class="modal-content" style="border: none;"><div class="modal-body"><div id="twitch-embed-modal-video"></div></div></div></div></div></div>'),$("#nav-twitch-hover").one("mouseenter",showNavbarTwitchStreams),$.each($(".twitch-embed-static"),function(t,e){bindEmbedTrigger(e)}),$.each($(".twitch-embed"),function(t,e){getTwitchEmbed(e)})});var showNavbarTwitchStreams=function(){var t=!1;return function(){if(!t){t=!0;var e=$("#twitch-embed-navbar-container"),a=$("#hidden-rendered-navbar-twitch-embed-container");a.children().each(function(t,a){var n=$(a).detach();n.addClass("twitch-embed-trigger"),e.append(n)}),a.remove()}}}();$(function(){if(window.BS&&window.BS.loader&&window.BS.loader.length)for(;BS.loader.length;)BS.loader.pop()()});